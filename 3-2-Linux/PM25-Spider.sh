curl -A "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14393" http://www.pm25.in/beijing | grep '<td>\|<p>数据更新时间\|</tr>' | sed 's/\r//g' | sed 's/^ *//g' | sed 's/<.*>\(.*\)<\/.*>/\1/g' | awk 'BEGIN { printf ("Timestamp,Station,PM25\n"); isFirst = 1; }; /数据更新时间/{ timestamp = substr($0, 8); count = 0; }; { count += 1; if (count == 1) station = $0; if (count == 5) pm25 = $0; }; /<\/tr>/ { if (!isFirst) printf ("%s,%s,%s\n", timestamp, station, pm25); count = 0; isFirst = 0; }' | iconv -f UTF-8 -t GB2312 > pm25-beijing.csv